aiolos
=====

####前言

在项目中我们往往会考虑使用配置文件来管理一些变量，在单机少量用户访问的场景下一个简单的配置文件就可以实现，修改配置后重启项目就可以生效。但线上环境往往是集群形式，且修改配置时不允许重启应用，这就要求开发们修改配置后能实时通知到集群内的机器，
我们首先想到的实现方式是数据库，作为一个集中管理数据的地方这是一个很好的解决方案，应用只要实时访问数据库就可以实现上述功能。遗憾的是这种实现方式还是一种被动方式，即应用要不停访问数据库，在互联网高并发的场景下，所有的大型网站都必须尽量不依赖RDBMS，
所以出现了很多优秀的JAVA中间件（JMS，memcache等，千万不要把网站做成一个数据库系统），对于上述的配置场景zookeeper是目前为止最适合也是使用程度最广的技术，其提供的一致性解决方案和watch机制解决了配置管理、集群管理等等分布式场景，
但一个线上使用的中间件，必须有万无一失的解决方案，即在崩溃的情况下也要保证配置数据的一致性、持久性，不然后果将是灾难性的。

####简介

aiolos采用ZK结合mysql，使用ZK的watch机制来主动通知集群，具体的配置value则放在数据库，通过ehcache来缓存配置的value,当配置发生改变时，清除ehcache缓存，通知集群来数据读取新的配置，再缓存到ehcache。
考虑的使用场景，附带实现按环境来管理项目配置。这种方式的好处式能有效压缩ZK的存储数据（ZK是基于内存来加载数据的，且每台机器是全量数据加载），同时数据库是一种有效的数据持久化的机制。

####项目结构

+  entity包下为Mysql表的数据存储结构

